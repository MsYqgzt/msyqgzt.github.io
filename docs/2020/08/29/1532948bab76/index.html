<!DOCTYPE html>
<html lang="cn">
    <head>
    <meta charset="utf-8">

    

    <!-- 渲染优化 -->
    <meta name="renderer" content="webkit">
    <meta name="force-rendering" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="HandheldFriendly" content="True" >
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <!--icon-->

    
        <link rel="shortcut icon" href="/blogs/favicon-standard.svg">
    
    
        <link rel="icon" type="image/png" sizes="16x16" href="/blogs/favicon-standard.svg">
    
    
        <link rel="icon" type="image/png" sizes="32x32" href="/blogs/favicon-standard.svg">
    
    
        <link rel="apple-touch-icon" sizes="180x180" href="/blogs/appleTouch_favicon.png">
    
    
        <link rel="mask-icon" href="/blogs/appleTouch_favicon.png">
    


    <!-- meta -->


<title>Python爬虫 | AlertNote</title>


    <meta name="keywords" content="编程">




    <!-- OpenGraph -->
 
    <meta name="description" content="Python基础知识数据类型 整数  Python可以处理任意大小的整数，当然包括负整数，在Python程序中，整数的表示方法和数学上的写法一模一样，例如：1，100，-8080，0，等等。 计算机由于使用二进制，所以，有时候用十六进制表示整数比较方便，十六进制用0x前缀和0-9，a-f表示，例如：0xff00，0xa5b4c3d2，等等。   浮点数  浮点数也就是小数，之所以称为浮点数，是因为">
<meta property="og:type" content="article">
<meta property="og:title" content="Python爬虫">
<meta property="og:url" content="http://msyqgzt.gitee.io/blogs/2020/08/29/1532948bab76/index.html">
<meta property="og:site_name" content="AlertNote">
<meta property="og:description" content="Python基础知识数据类型 整数  Python可以处理任意大小的整数，当然包括负整数，在Python程序中，整数的表示方法和数学上的写法一模一样，例如：1，100，-8080，0，等等。 计算机由于使用二进制，所以，有时候用十六进制表示整数比较方便，十六进制用0x前缀和0-9，a-f表示，例如：0xff00，0xa5b4c3d2，等等。   浮点数  浮点数也就是小数，之所以称为浮点数，是因为">
<meta property="og:locale">
<meta property="article:published_time" content="2020-08-28T16:00:00.000Z">
<meta property="article:modified_time" content="2020-10-31T12:29:32.629Z">
<meta property="article:author" content="Alert">
<meta property="article:tag" content="编程">
<meta name="twitter:card" content="summary_large_image">


    
<link rel="stylesheet" href="/blogs/css/style/main.css">
 


    
<link rel="stylesheet" href="/blogs/css/darkmode.css">

    
<script src="/blogs/js/darkmode.js"></script>



    
    
        <link rel="stylesheet" id="hl-default-theme" href="/blogs/css/highlight/default.css" media="none" onload="if(getComputedStyle(document.documentElement).getPropertyValue('--color-mode').indexOf('dark')===-1)this.media='all'">
        
            <link rel="stylesheet" id="hl-dark-theme" href="/blogs/css/highlight/dark.css" media="none" onload="if(getComputedStyle(document.documentElement).getPropertyValue('--color-mode').indexOf('dark')!==-1)this.media='all'">
        
    

    
    

     
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
 

    <!-- custom head -->

<meta name="generator" content="Hexo 5.2.0"></head>

    <body>
        <div id="app">
            <header class="header">
    <div class="header__left">
        <a href="/blogs/" class="button">
            <span class="logo__text">AlertNote</span>
        </a>
    </div>
    <div class="header__right">
        
            <div class="navbar__menus">
                
                    <a href="/blogs/" class="navbar-menu button">首页</a>
                
                    <a href="/blogs/categories/" class="navbar-menu button">分类</a>
                
                    <a href="/blogs/tags/" class="navbar-menu button">标签</a>
                
                    <a href="/blogs/archives/" class="navbar-menu button">归档</a>
                
                    <a href="/blogs/friends/" class="navbar-menu button">友链</a>
                
                    <a href="/blogs/about/" class="navbar-menu button">关于我</a>
                
            </div>
        
        
        
    <a href="/blogs/search/" id="btn-search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" width="24" height="24" fill="currentColor" stroke="currentColor" stroke-width="32"><path d="M192 448c0-141.152 114.848-256 256-256s256 114.848 256 256-114.848 256-256 256-256-114.848-256-256z m710.624 409.376l-206.88-206.88A318.784 318.784 0 0 0 768 448c0-176.736-143.264-320-320-320S128 271.264 128 448s143.264 320 320 320a318.784 318.784 0 0 0 202.496-72.256l206.88 206.88 45.248-45.248z"></path></svg>
    </a>


        
        
    <a href="javaScript:void(0);" id="btn-toggle-dark">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
    </a>


         
    <a href="#" class="button" id="b2t" aria-label="Back to Top" title="Back to Top">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" width="32" height="32">
            <path d="M233.376 722.752L278.624 768 512 534.624 745.376 768l45.248-45.248L512 444.128zM192 352h640V288H192z" fill="currentColor"></path>
        </svg>
    </a>


        
            <a class="dropdown-icon button" id="btn-dropdown" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width='24' height='24' fill="none" stroke="currentColor" stroke-width="0.7" stroke-linecap="round" stroke-linejoin="round"><path fill="currentColor" d="M3.314,4.8h13.372c0.41,0,0.743-0.333,0.743-0.743c0-0.41-0.333-0.743-0.743-0.743H3.314c-0.41,0-0.743,0.333-0.743,0.743C2.571,4.467,2.904,4.8,3.314,4.8z M16.686,15.2H3.314c-0.41,0-0.743,0.333-0.743,0.743s0.333,0.743,0.743,0.743h13.372c0.41,0,0.743-0.333,0.743-0.743S17.096,15.2,16.686,15.2z M16.686,9.257H3.314c-0.41,0-0.743,0.333-0.743,0.743s0.333,0.743,0.743,0.743h13.372c0.41,0,0.743-0.333,0.743-0.743S17.096,9.257,16.686,9.257z"></path></svg></a>
            <div class="dropdown-menus" id="dropdown-menus">
                
                    <a href="/blogs/" class="dropdown-menu button">首页</a>
                
                    <a href="/blogs/categories/" class="dropdown-menu button">分类</a>
                
                    <a href="/blogs/tags/" class="dropdown-menu button">标签</a>
                
                    <a href="/blogs/archives/" class="dropdown-menu button">归档</a>
                
                    <a href="/blogs/friends/" class="dropdown-menu button">友链</a>
                
                    <a href="/blogs/about/" class="dropdown-menu button">关于我</a>
                
            </div>
        
    </div>
</header>


            <main class="main">
    

<div class="post-title">
    <h1 class="post-title__text">
        Python爬虫
    </h1>
    <div class="post-title__meta">
        <a href="/blogs/archives/2020/08/" class="post-meta__date button">2020-08-29</a>
        
    <span class="separate-dot"></span><a href="/blogs/categories/Python/" class="button">Python</a>

    <span class="separate-dot"></span><a href="/blogs/categories/%E7%88%AC%E8%99%AB/" class="button">爬虫</a>

 
        
    
     
    <span id="busuanzi_container_page_pv" hidden>
        <span class="separate-dot"></span>
        <span></span>
        <span id="busuanzi_value_page_pv"></span>
        <span>次访问</span>
    </span>



 

 
    </div>
</div>


    <aside class="post-side">
        <div class="post-side__toc">
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Python%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="toc-number">1.</span> <span class="toc-text">Python基础知识</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.1.</span> <span class="toc-text">数据类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#print%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.2.</span> <span class="toc-text">print语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E9%87%8A"><span class="toc-number">1.3.</span> <span class="toc-text">注释</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">1.4.</span> <span class="toc-text">字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#raw%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%8E%E5%A4%9A%E8%A1%8C%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">1.5.</span> <span class="toc-text">raw字符串与多行字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B4%E6%95%B0%E5%92%8C%E6%B5%AE%E7%82%B9%E6%95%B0"><span class="toc-number">1.6.</span> <span class="toc-text">整数和浮点数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%83%E5%B0%94%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.7.</span> <span class="toc-text">布尔类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#list"><span class="toc-number">1.8.</span> <span class="toc-text">list</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAlist"><span class="toc-number">1.8.1.</span> <span class="toc-text">创建list</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%89%E7%85%A7%E7%B4%A2%E5%BC%95%E8%AE%BF%E9%97%AElist"><span class="toc-number">1.8.2.</span> <span class="toc-text">按照索引访问list</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%80%92%E5%BA%8F%E8%AE%BF%E9%97%AElist"><span class="toc-number">1.8.3.</span> <span class="toc-text">倒序访问list</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%99list%E6%B7%BB%E5%8A%A0%E6%96%B0%E5%85%83%E7%B4%A0"><span class="toc-number">1.8.4.</span> <span class="toc-text">给list添加新元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%8Elist%E5%88%A0%E9%99%A4%E5%85%83%E7%B4%A0"><span class="toc-number">1.8.5.</span> <span class="toc-text">从list删除元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%BF%E6%8D%A2%E5%85%83%E7%B4%A0"><span class="toc-number">1.8.6.</span> <span class="toc-text">替换元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAtuple"><span class="toc-number">1.8.7.</span> <span class="toc-text">创建tuple</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%95%E5%85%83%E7%B4%A0tuple"><span class="toc-number">1.8.8.</span> <span class="toc-text">单元素tuple</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%80%9C%E5%8F%AF%E5%8F%98%E2%80%9D%E7%9A%84tuple"><span class="toc-number">1.8.9.</span> <span class="toc-text">“可变”的tuple</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%88%AC%E8%99%AB%E7%AE%80%E4%BB%8B"><span class="toc-number">2.</span> <span class="toc-text">爬虫简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%88%AC%E8%99%AB%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">2.1.</span> <span class="toc-text">爬虫是什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%88%AC%E8%99%AB%E7%9A%84%E4%BB%B7%E5%80%BC"><span class="toc-number">2.2.</span> <span class="toc-text">爬虫的价值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%88%AC%E8%99%AB%E5%8F%AF%E8%83%BD%E5%B8%A6%E6%9D%A5%E7%9A%84%E9%A3%8E%E9%99%A9"><span class="toc-number">2.3.</span> <span class="toc-text">爬虫可能带来的风险</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%9C%A8%E4%BD%BF%E7%94%A8-%E7%BC%96%E5%86%99%E7%88%AC%E8%99%AB%E7%9A%84%E8%BF%87%E7%A8%8B%E4%B8%AD%EF%BC%8C%E9%81%BF%E5%85%8D%E8%BF%9B%E5%85%A5%E2%80%9D%E5%B1%80%E5%AD%90%E2%80%9D%E7%9A%84%E5%8E%84%E8%BF%90"><span class="toc-number">2.4.</span> <span class="toc-text">如何在使用&#x2F;编写爬虫的过程中，避免进入”局子”的厄运</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%88%AC%E8%99%AB%E5%9C%A8%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E4%B8%AD%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">2.5.</span> <span class="toc-text">爬虫在使用场景中的分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%88%AC%E8%99%AB%E7%9A%84%E7%9F%9B%E4%B8%8E%E7%9B%BE"><span class="toc-number">2.6.</span> <span class="toc-text">爬虫的矛与盾</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#http-amp-https%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.</span> <span class="toc-text">http&amp;https协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#http%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.1.</span> <span class="toc-text">http协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5%EF%BC%9A%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%92%8C%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E4%BA%A4%E4%BA%92%E7%9A%84%E4%B8%80%E7%A7%8D%E5%BD%A2%E5%BC%8F%E3%80%82"><span class="toc-number">3.1.1.</span> <span class="toc-text">概念：服务器和客户端进行数据交互的一种形式。</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#https%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.2.</span> <span class="toc-text">https协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5%EF%BC%9A%E5%AE%89%E5%85%A8%E7%9A%84%E8%B6%85%E6%96%87%E6%9C%AC%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.2.1.</span> <span class="toc-text">概念：安全的超文本传输协议</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#requests-%E6%A8%A1%E5%9D%97"><span class="toc-number">4.</span> <span class="toc-text">requests 模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5"><span class="toc-number">4.1.</span> <span class="toc-text">概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%80%E5%A7%8B%E4%BD%BF%E7%94%A8"><span class="toc-number">4.2.</span> <span class="toc-text">开始使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E4%B8%AA%E7%88%AC%E8%99%AB%E7%A8%8B%E5%BA%8F"><span class="toc-number">4.3.</span> <span class="toc-text">第一个爬虫程序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B"><span class="toc-number">4.4.</span> <span class="toc-text">实战案例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E7%88%AC%E5%8F%96%E6%90%9C%E7%8B%97%E6%8C%87%E5%AE%9A%E8%AF%8D%E6%9D%A1%E5%AF%B9%E5%BA%94%E7%9A%84%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C%E9%A1%B5%E9%9D%A2%EF%BC%88%E7%AE%80%E6%98%93%E7%BD%91%E9%A1%B5%E9%87%87%E9%9B%86%E5%99%A8%EF%BC%89"><span class="toc-number">4.4.1.</span> <span class="toc-text">1. 爬取搜狗指定词条对应的搜索结果页面（简易网页采集器）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-number">4.4.1.1.</span> <span class="toc-text">代码实现</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%A0%B4%E8%A7%A3%E7%99%BE%E5%BA%A6%E7%BF%BB%E8%AF%91"><span class="toc-number">4.4.2.</span> <span class="toc-text">2. 破解百度翻译</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0-1"><span class="toc-number">4.4.2.1.</span> <span class="toc-text">代码实现</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E7%88%AC%E5%8F%96%E8%B1%86%E7%93%A3%E7%94%B5%E5%BD%B1%E5%88%86%E7%B1%BB%E6%8E%92%E8%A1%8C%E6%A6%9Chttps-movie-douban-com%E4%B8%AD%E7%9A%84%E7%94%B5%E5%BD%B1%E8%AF%A6%E6%83%85%E6%95%B0%E6%8D%AE"><span class="toc-number">4.4.3.</span> <span class="toc-text">3. 爬取豆瓣电影分类排行榜https:&#x2F;&#x2F;movie.douban.com中的电影详情数据</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0-2"><span class="toc-number">4.4.3.1.</span> <span class="toc-text">代码实现</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E7%88%AC%E5%8F%96%E8%82%AF%E5%BE%B7%E5%9F%BA%E9%A4%90%E5%8E%85%E6%9F%A5%E8%AF%A2http-www-kfc-com-cn-kfccda-index-aspx%E4%B8%AD%E6%8C%87%E5%AE%9A%E5%9C%B0%E7%82%B9%E7%9A%84%E9%A4%90%E5%8E%85%E6%95%B0"><span class="toc-number">4.4.4.</span> <span class="toc-text">4. 爬取肯德基餐厅查询http:&#x2F;&#x2F;www.kfc.com.cn&#x2F;kfccda&#x2F;index.aspx中指定地点的餐厅数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E3%80%90%E8%BF%9B%E9%98%B6%E3%80%91%E7%88%AC%E5%8F%96%E5%9B%BD%E5%AE%B6%E8%8D%AF%E5%93%81%E7%9B%91%E7%9D%A3%E7%AE%A1%E7%90%86%E6%80%BB%E5%B1%80%E4%B8%AD-%E5%9F%BA%E4%BA%8E%E4%B8%AD%E5%8D%8E%E4%BA%BA%E6%B0%91%E5%85%B1%E5%92%8C%E5%9B%BD%E5%8C%96%E5%A6%86%E5%93%81%E7%94%9F%E4%BA%A7%E8%AE%B8%E5%8F%AF%E8%AF%81%E7%9B%B8%E5%85%B3%E6%95%B0%E6%8D%AEhttp-125-35-6-84-81-xk"><span class="toc-number">4.4.5.</span> <span class="toc-text">5. 【进阶】爬取国家药品监督管理总局中 基于中华人民共和国化妆品生产许可证相关数据http:&#x2F;&#x2F;125.35.6.84:81&#x2F;xk</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90"><span class="toc-number">4.4.6.</span> <span class="toc-text">案例分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0-3"><span class="toc-number">4.4.7.</span> <span class="toc-text">代码实现</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96"><span class="toc-number">4.4.8.</span> <span class="toc-text">代码优化</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E8%A7%A3%E6%9E%90"><span class="toc-number">5.</span> <span class="toc-text">数据解析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E8%A7%A3%E6%9E%90%E7%9A%84%E6%96%B9%E6%B3%95-%E5%88%86%E7%B1%BB"><span class="toc-number">5.1.</span> <span class="toc-text">数据解析的方法&#x2F;分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E8%A7%A3%E6%9E%90%E7%9A%84%E5%8E%9F%E7%90%86%E6%A6%82%E8%BF%B0"><span class="toc-number">5.2.</span> <span class="toc-text">数据解析的原理概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%96%B9%E6%B3%95"><span class="toc-number">5.3.</span> <span class="toc-text">正则表达式方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">5.3.1.</span> <span class="toc-text">常用的正则表达式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E7%BB%83%E4%B9%A0"><span class="toc-number">5.3.2.</span> <span class="toc-text">正则练习</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B"><span class="toc-number">5.3.3.</span> <span class="toc-text">实例</span></a></li></ol></li></ol></li></ol>
        </div>
    </aside>
    <a class="btn-toc button" id="btn-toc" tabindex="0">
        <svg viewBox="0 0 1024 1024" width="32" height="32" xmlns="http://www.w3.org/2000/svg">
            <path d="M128 256h64V192H128zM320 256h576V192H320zM128 544h64v-64H128zM320 544h576v-64H320zM128 832h64v-64H128zM320 832h576v-64H320z" fill="currentColor"></path>
        </svg>
    </a>
    <div class="toc-menus" id="toc-menus">
        <div class="toc-title">Article Directory</div>
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Python%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="toc-number">1.</span> <span class="toc-text">Python基础知识</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.1.</span> <span class="toc-text">数据类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#print%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.2.</span> <span class="toc-text">print语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E9%87%8A"><span class="toc-number">1.3.</span> <span class="toc-text">注释</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">1.4.</span> <span class="toc-text">字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#raw%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%8E%E5%A4%9A%E8%A1%8C%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">1.5.</span> <span class="toc-text">raw字符串与多行字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B4%E6%95%B0%E5%92%8C%E6%B5%AE%E7%82%B9%E6%95%B0"><span class="toc-number">1.6.</span> <span class="toc-text">整数和浮点数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%83%E5%B0%94%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.7.</span> <span class="toc-text">布尔类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#list"><span class="toc-number">1.8.</span> <span class="toc-text">list</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAlist"><span class="toc-number">1.8.1.</span> <span class="toc-text">创建list</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%89%E7%85%A7%E7%B4%A2%E5%BC%95%E8%AE%BF%E9%97%AElist"><span class="toc-number">1.8.2.</span> <span class="toc-text">按照索引访问list</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%80%92%E5%BA%8F%E8%AE%BF%E9%97%AElist"><span class="toc-number">1.8.3.</span> <span class="toc-text">倒序访问list</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%99list%E6%B7%BB%E5%8A%A0%E6%96%B0%E5%85%83%E7%B4%A0"><span class="toc-number">1.8.4.</span> <span class="toc-text">给list添加新元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%8Elist%E5%88%A0%E9%99%A4%E5%85%83%E7%B4%A0"><span class="toc-number">1.8.5.</span> <span class="toc-text">从list删除元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%BF%E6%8D%A2%E5%85%83%E7%B4%A0"><span class="toc-number">1.8.6.</span> <span class="toc-text">替换元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAtuple"><span class="toc-number">1.8.7.</span> <span class="toc-text">创建tuple</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%95%E5%85%83%E7%B4%A0tuple"><span class="toc-number">1.8.8.</span> <span class="toc-text">单元素tuple</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%80%9C%E5%8F%AF%E5%8F%98%E2%80%9D%E7%9A%84tuple"><span class="toc-number">1.8.9.</span> <span class="toc-text">“可变”的tuple</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%88%AC%E8%99%AB%E7%AE%80%E4%BB%8B"><span class="toc-number">2.</span> <span class="toc-text">爬虫简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%88%AC%E8%99%AB%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">2.1.</span> <span class="toc-text">爬虫是什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%88%AC%E8%99%AB%E7%9A%84%E4%BB%B7%E5%80%BC"><span class="toc-number">2.2.</span> <span class="toc-text">爬虫的价值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%88%AC%E8%99%AB%E5%8F%AF%E8%83%BD%E5%B8%A6%E6%9D%A5%E7%9A%84%E9%A3%8E%E9%99%A9"><span class="toc-number">2.3.</span> <span class="toc-text">爬虫可能带来的风险</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%9C%A8%E4%BD%BF%E7%94%A8-%E7%BC%96%E5%86%99%E7%88%AC%E8%99%AB%E7%9A%84%E8%BF%87%E7%A8%8B%E4%B8%AD%EF%BC%8C%E9%81%BF%E5%85%8D%E8%BF%9B%E5%85%A5%E2%80%9D%E5%B1%80%E5%AD%90%E2%80%9D%E7%9A%84%E5%8E%84%E8%BF%90"><span class="toc-number">2.4.</span> <span class="toc-text">如何在使用&#x2F;编写爬虫的过程中，避免进入”局子”的厄运</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%88%AC%E8%99%AB%E5%9C%A8%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E4%B8%AD%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">2.5.</span> <span class="toc-text">爬虫在使用场景中的分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%88%AC%E8%99%AB%E7%9A%84%E7%9F%9B%E4%B8%8E%E7%9B%BE"><span class="toc-number">2.6.</span> <span class="toc-text">爬虫的矛与盾</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#http-amp-https%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.</span> <span class="toc-text">http&amp;https协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#http%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.1.</span> <span class="toc-text">http协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5%EF%BC%9A%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%92%8C%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E4%BA%A4%E4%BA%92%E7%9A%84%E4%B8%80%E7%A7%8D%E5%BD%A2%E5%BC%8F%E3%80%82"><span class="toc-number">3.1.1.</span> <span class="toc-text">概念：服务器和客户端进行数据交互的一种形式。</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#https%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.2.</span> <span class="toc-text">https协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5%EF%BC%9A%E5%AE%89%E5%85%A8%E7%9A%84%E8%B6%85%E6%96%87%E6%9C%AC%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.2.1.</span> <span class="toc-text">概念：安全的超文本传输协议</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#requests-%E6%A8%A1%E5%9D%97"><span class="toc-number">4.</span> <span class="toc-text">requests 模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5"><span class="toc-number">4.1.</span> <span class="toc-text">概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%80%E5%A7%8B%E4%BD%BF%E7%94%A8"><span class="toc-number">4.2.</span> <span class="toc-text">开始使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E4%B8%AA%E7%88%AC%E8%99%AB%E7%A8%8B%E5%BA%8F"><span class="toc-number">4.3.</span> <span class="toc-text">第一个爬虫程序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B"><span class="toc-number">4.4.</span> <span class="toc-text">实战案例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E7%88%AC%E5%8F%96%E6%90%9C%E7%8B%97%E6%8C%87%E5%AE%9A%E8%AF%8D%E6%9D%A1%E5%AF%B9%E5%BA%94%E7%9A%84%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C%E9%A1%B5%E9%9D%A2%EF%BC%88%E7%AE%80%E6%98%93%E7%BD%91%E9%A1%B5%E9%87%87%E9%9B%86%E5%99%A8%EF%BC%89"><span class="toc-number">4.4.1.</span> <span class="toc-text">1. 爬取搜狗指定词条对应的搜索结果页面（简易网页采集器）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-number">4.4.1.1.</span> <span class="toc-text">代码实现</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%A0%B4%E8%A7%A3%E7%99%BE%E5%BA%A6%E7%BF%BB%E8%AF%91"><span class="toc-number">4.4.2.</span> <span class="toc-text">2. 破解百度翻译</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0-1"><span class="toc-number">4.4.2.1.</span> <span class="toc-text">代码实现</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E7%88%AC%E5%8F%96%E8%B1%86%E7%93%A3%E7%94%B5%E5%BD%B1%E5%88%86%E7%B1%BB%E6%8E%92%E8%A1%8C%E6%A6%9Chttps-movie-douban-com%E4%B8%AD%E7%9A%84%E7%94%B5%E5%BD%B1%E8%AF%A6%E6%83%85%E6%95%B0%E6%8D%AE"><span class="toc-number">4.4.3.</span> <span class="toc-text">3. 爬取豆瓣电影分类排行榜https:&#x2F;&#x2F;movie.douban.com中的电影详情数据</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0-2"><span class="toc-number">4.4.3.1.</span> <span class="toc-text">代码实现</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E7%88%AC%E5%8F%96%E8%82%AF%E5%BE%B7%E5%9F%BA%E9%A4%90%E5%8E%85%E6%9F%A5%E8%AF%A2http-www-kfc-com-cn-kfccda-index-aspx%E4%B8%AD%E6%8C%87%E5%AE%9A%E5%9C%B0%E7%82%B9%E7%9A%84%E9%A4%90%E5%8E%85%E6%95%B0"><span class="toc-number">4.4.4.</span> <span class="toc-text">4. 爬取肯德基餐厅查询http:&#x2F;&#x2F;www.kfc.com.cn&#x2F;kfccda&#x2F;index.aspx中指定地点的餐厅数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E3%80%90%E8%BF%9B%E9%98%B6%E3%80%91%E7%88%AC%E5%8F%96%E5%9B%BD%E5%AE%B6%E8%8D%AF%E5%93%81%E7%9B%91%E7%9D%A3%E7%AE%A1%E7%90%86%E6%80%BB%E5%B1%80%E4%B8%AD-%E5%9F%BA%E4%BA%8E%E4%B8%AD%E5%8D%8E%E4%BA%BA%E6%B0%91%E5%85%B1%E5%92%8C%E5%9B%BD%E5%8C%96%E5%A6%86%E5%93%81%E7%94%9F%E4%BA%A7%E8%AE%B8%E5%8F%AF%E8%AF%81%E7%9B%B8%E5%85%B3%E6%95%B0%E6%8D%AEhttp-125-35-6-84-81-xk"><span class="toc-number">4.4.5.</span> <span class="toc-text">5. 【进阶】爬取国家药品监督管理总局中 基于中华人民共和国化妆品生产许可证相关数据http:&#x2F;&#x2F;125.35.6.84:81&#x2F;xk</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90"><span class="toc-number">4.4.6.</span> <span class="toc-text">案例分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0-3"><span class="toc-number">4.4.7.</span> <span class="toc-text">代码实现</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96"><span class="toc-number">4.4.8.</span> <span class="toc-text">代码优化</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E8%A7%A3%E6%9E%90"><span class="toc-number">5.</span> <span class="toc-text">数据解析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E8%A7%A3%E6%9E%90%E7%9A%84%E6%96%B9%E6%B3%95-%E5%88%86%E7%B1%BB"><span class="toc-number">5.1.</span> <span class="toc-text">数据解析的方法&#x2F;分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E8%A7%A3%E6%9E%90%E7%9A%84%E5%8E%9F%E7%90%86%E6%A6%82%E8%BF%B0"><span class="toc-number">5.2.</span> <span class="toc-text">数据解析的原理概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%96%B9%E6%B3%95"><span class="toc-number">5.3.</span> <span class="toc-text">正则表达式方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">5.3.1.</span> <span class="toc-text">常用的正则表达式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E7%BB%83%E4%B9%A0"><span class="toc-number">5.3.2.</span> <span class="toc-text">正则练习</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B"><span class="toc-number">5.3.3.</span> <span class="toc-text">实例</span></a></li></ol></li></ol></li></ol>
    </div>


<article class="post content-card">
    <div class="post__header"></div>
    <div class="post__content">
        <h2 id="Python基础知识"><a href="#Python基础知识" class="headerlink" title="Python基础知识"></a>Python基础知识</h2><h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><ul>
<li><p>整数</p>
<ul>
<li>Python可以处理任意大小的整数，当然包括负整数，在Python程序中，整数的表示方法和数学上的写法一模一样，例如：<code>1</code>，<code>100</code>，<code>-8080</code>，<code>0</code>，等等。</li>
<li>计算机由于使用二进制，所以，有时候用十六进制表示整数比较方便，十六进制用<code>0x</code>前缀和0-9，a-f表示，例如：<code>0xff00</code>，<code>0xa5b4c3d2</code>，等等。</li>
</ul>
</li>
<li><p>浮点数</p>
<ul>
<li><p>浮点数也就是小数，之所以称为浮点数，是因为按照科学记数法表示时，一个浮点数的小数点位置是可变的，比如，1.23x10^9和12.3x10^8是相等的。浮点数可以用数学写法，如<code>1.23</code>，<code>3.14</code>，<code>-9.01</code>，等等。但是对于很大或很小的浮点数，就必须用科学计数法表示，把10用e替代，1.23x10^9就是<strong>1.23e9</strong>，或者<strong>12.3e8</strong>，0.000012可以写成<strong>1.2e-5</strong>，等等。</p>
</li>
<li><p>整数和浮点数在计算机内部存储的方式是不同的，整数运算永远是精确的（除法难道也是精确的？是的！），而浮点数运算则可能会有四舍五入的误差。</p>
</li>
</ul>
</li>
<li><p>字符串</p>
<ul>
<li>字符串是以<code>&#39;&#39;</code>或<code>&quot;&quot;</code>括起来的任意文本，比如**’abc’<strong>，</strong>“xyz”<strong>等等。请注意，</strong>‘’<strong>或</strong>“”**本身只是一种表示方式，不是字符串的一部分，因此，字符串<code>&#39;abc&#39;</code>只有<code>a，b，c</code>这3个字符。</li>
</ul>
</li>
<li><p>布尔值</p>
<ul>
<li>在Python中，可以直接用<code>True</code>、<code>False</code>表示布尔值（请注意大小写），也可以通过布尔运算计算出来。</li>
<li>布尔值可以用<code>and</code>、<code>or</code>和<code>not</code>运算。</li>
</ul>
</li>
<li><p>空值</p>
<ul>
<li>空值是Python里一个特殊的值，用<code>None</code>表示。None不能理解为0，因为0是有意义的，而None是一个特殊的空值。</li>
</ul>
</li>
</ul>
<h3 id="print语句"><a href="#print语句" class="headerlink" title="print语句"></a>print语句</h3><p><strong>print</strong>语句可以向屏幕上输出指定的文字。</p>
<p>比如输出’hello, world’，用代码实现如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> <span class="string">&#x27;hello, world&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>1.Python交互式环境下编写代码时，<code>&gt;&gt;&gt;</code>是Python解释器的提示符，不是代码的一部分。</p>
<p>2.print语句也可以跟上多个字符串，用逗号“,”隔开，就可以连成一串输出：</p>
<figure class="highlight sml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print <span class="symbol">&#x27;The</span> quick brown fox&#x27;, <span class="symbol">&#x27;jumps</span> over&#x27;, <span class="symbol">&#x27;the</span> lazy dog&#x27;</span><br><span class="line"><span class="type">The</span> quick brown fox jumps over the lazy dog</span><br></pre></td></tr></table></figure>

<p>print会依次打印每个字符串，遇到逗号“,”会输出一个空格，因此，输出的字符串是这样拼起来的：</p>
<h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><p>Python的注释以<code>#</code>开头，后面的文字直到行尾都算注释</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 这一行全部都是注释...</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">&#x27;hello&#x27;</span> <span class="comment">## 这也是注释</span></span><br></pre></td></tr></table></figure>

<p>注释还有一个巧妙的用途，就是一些代码我们不想运行，但又不想删除，就可以用注释暂时屏蔽掉：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 暂时不想运行下面一行代码:</span></span><br><span class="line"><span class="comment">## print &#x27;hello, python.&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><p>字符串可以用<code>&#39;&#39;</code>或者<code>&quot;&quot;</code>括起来表示。</p>
<p>如果字符串本身包含<code>&#39;</code>怎么办？比如我们要表示字符串<code>I&#39;m OK</code>，这时，可以用<code>&quot; &quot;</code>括起来表示：</p>
<figure class="highlight smalltalk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&quot;I&#x27;m OK&quot;</span></span><br></pre></td></tr></table></figure>

<p>类似的，如果字符串包含<code>&quot;</code>，我们就可以用<code>&#39; &#39;</code>括起来表示：</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">&#x27;Learn</span> <span class="string">&quot;Python&quot;</span>&#x27;</span><br></pre></td></tr></table></figure>

<p>如果字符串既包含<code>&#39;</code>又包含<code>&quot;</code>怎么办？</p>
<p>这个时候，就需要对字符串的某些特殊字符进行“转义”，Python字符串用<code>\</code>进行转义。</p>
<p>要表示字符串 <code>Bob said &quot;I&#39;m OK&quot;.</code><br>由于 ‘ 和 “ 会引起歧义，因此，我们在它前面插入一个<code>\</code>表示这是一个普通字符，不代表字符串的起始，因此，这个字符串又可以表示为</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;Bob said \&quot;I\&#x27;m OK\&quot;.&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong>转义字符 \ 不计入字符串的内容中。</p>
<p>常用的转义字符还有：</p>
<figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">\<span class="name">n</span></span> 表示换行</span><br><span class="line"><span class="tag">\<span class="name">t</span></span> 表示一个制表符</span><br><span class="line"><span class="tag">\<span class="name">\</span></span> 表示 <span class="tag">\<span class="name"> </span></span>字符本身</span><br></pre></td></tr></table></figure>

<h3 id="raw字符串与多行字符串"><a href="#raw字符串与多行字符串" class="headerlink" title="raw字符串与多行字符串"></a>raw字符串与多行字符串</h3><p>如果一个字符串包含很多需要转义的字符，对每一个字符都进行转义会很麻烦。为了避免这种情况，我们可以在字符串前面加个前缀<code>r</code>，表示这是一个 raw 字符串，里面的字符就不需要转义了。例如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">r&#x27;\(~_~)/ \(~_~)/&#x27;</span></span><br></pre></td></tr></table></figure>

<p>但是<code>r&#39;...&#39;</code>表示法不能表示多行字符串，也不能表示包含<code>&#39;</code>和 <code>&quot;</code>的字符串（为什么？）</p>
<p>如果要表示多行字符串，可以用<code>&#39;&#39;&#39;...&#39;&#39;&#39;</code>表示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;Line 1</span></span><br><span class="line"><span class="string">Line 2</span></span><br><span class="line"><span class="string">Line 3&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>上面这个字符串的表示方法和下面的是完全一样的：</p>
<p>‘Line 1\nLine 2\nLine 3’</p>
<p>还可以在多行字符串前面添加<code>r</code>，把这个多行字符串也变成一个raw字符串：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">r&#x27;&#x27;&#x27;Python is created by &quot;Guido&quot;.</span></span><br><span class="line"><span class="string">It is free and easy to learn.&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="整数和浮点数"><a href="#整数和浮点数" class="headerlink" title="整数和浮点数"></a>整数和浮点数</h3><p>Python支持对整数和浮点数直接进行四则混合运算，运算规则和数学上的四则运算规则完全一致。</p>
<p>基本的运算：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> + <span class="number">2</span> + <span class="number">3</span>   <span class="comment">## ==&gt; 6</span></span><br><span class="line"><span class="number">4</span> * <span class="number">5</span> - <span class="number">6</span>   <span class="comment">## ==&gt; 14</span></span><br><span class="line"><span class="number">7.5</span> / <span class="number">8</span> + <span class="number">2.1</span>   <span class="comment">## ==&gt; 3.0375</span></span><br></pre></td></tr></table></figure>

<p>使用括号可以提升优先级，这和数学运算完全一致，注意只能使用小括号，但是括号可以嵌套很多层：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">1</span> + <span class="number">2</span>) * <span class="number">3</span>    <span class="comment">## ==&gt; 9</span></span><br><span class="line">(<span class="number">2.2</span> + <span class="number">3.3</span>) / (<span class="number">1.5</span> * (<span class="number">9</span> - <span class="number">0.3</span>))    <span class="comment">## ==&gt; 0.42145593869731807</span></span><br></pre></td></tr></table></figure>

<p>和数学运算不同的地方是，Python的整数运算结果仍然是整数，浮点数运算结果仍然是浮点数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> + <span class="number">2</span>    <span class="comment">## ==&gt; 整数 3</span></span><br><span class="line"><span class="number">1.0</span> + <span class="number">2.0</span>    <span class="comment">## ==&gt; 浮点数 3.0</span></span><br></pre></td></tr></table></figure>

<p>但是整数和浮点数混合运算的结果就变成浮点数了：</p>
<figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">1 </span>+ <span class="number">2.0</span>    ## ==&gt; 浮点数 <span class="number">3.0</span></span><br></pre></td></tr></table></figure>

<p>为什么要区分整数运算和浮点数运算呢？这是因为整数运算的结果永远是精确的，而浮点数运算的结果不一定精确，因为计算机内存再大，也无法精确表示出无限循环小数，比如<code>0.1</code>换成二进制表示就是无限循环小数。</p>
<p>那整数的除法运算遇到除不尽的时候，结果难道不是浮点数吗？我们来试一下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">11</span> / <span class="number">4</span>    <span class="comment">## ==&gt; 2</span></span><br></pre></td></tr></table></figure>

<p>令很多初学者惊讶的是，Python的整数除法，即使除不尽，结果仍然是整数，余数直接被扔掉。不过，Python提供了一个求余的运算 % 可以计算余数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">11</span> % <span class="number">4</span>    <span class="comment">## ==&gt; 3</span></span><br></pre></td></tr></table></figure>

<p>如果我们要计算 11 / 4 的精确结果，按照“整数和浮点数混合运算的结果是浮点数”的法则，把两个数中的一个变成浮点数再运算就没问题了：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">11.0</span> / <span class="number">4</span>    <span class="comment">## ==&gt; 2.75</span></span><br></pre></td></tr></table></figure>



<h3 id="布尔类型"><a href="#布尔类型" class="headerlink" title="布尔类型"></a>布尔类型</h3><p><strong>与运算</strong>：只有两个布尔值都为 True 时，计算结果才为 True。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">True</span> <span class="keyword">and</span> <span class="literal">True</span>   <span class="comment">## ==&gt; True</span></span><br><span class="line"><span class="literal">True</span> <span class="keyword">and</span> <span class="literal">False</span>   <span class="comment">## ==&gt; False</span></span><br><span class="line"><span class="literal">False</span> <span class="keyword">and</span> <span class="literal">True</span>   <span class="comment">## ==&gt; False</span></span><br><span class="line"><span class="literal">False</span> <span class="keyword">and</span> <span class="literal">False</span>   <span class="comment">## ==&gt; False</span></span><br></pre></td></tr></table></figure>

<p><strong>或运算</strong>：只要有一个布尔值为 True，计算结果就是 True。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">True</span> <span class="keyword">or</span> <span class="literal">True</span>   <span class="comment">## ==&gt; True</span></span><br><span class="line"><span class="literal">True</span> <span class="keyword">or</span> <span class="literal">False</span>   <span class="comment">## ==&gt; True</span></span><br><span class="line"><span class="literal">False</span> <span class="keyword">or</span> <span class="literal">True</span>   <span class="comment">## ==&gt; True</span></span><br><span class="line"><span class="literal">False</span> <span class="keyword">or</span> <span class="literal">False</span>   <span class="comment">## ==&gt; False</span></span><br></pre></td></tr></table></figure>

<p><strong>非运算</strong>：把True变为False，或者把False变为True：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">not</span> <span class="literal">True</span>   <span class="comment">## ==&gt; False</span></span><br><span class="line"><span class="keyword">not</span> <span class="literal">False</span>   <span class="comment">## ==&gt; True</span></span><br></pre></td></tr></table></figure>

<p>布尔运算在计算机中用来做条件判断，根据计算结果为True或者False，计算机可以自动执行不同的后续代码。</p>
<p>在Python中，布尔类型还可以与其他数据类型做 and、or和not运算，请看下面的代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="literal">True</span></span><br><span class="line"><span class="keyword">print</span> a <span class="keyword">and</span> <span class="string">&#x27;a=T&#x27;</span> <span class="keyword">or</span> <span class="string">&#x27;a=F&#x27;</span></span><br></pre></td></tr></table></figure>

<p>计算结果不是布尔类型，而是字符串 ‘a=T’，这是为什么呢？</p>
<p>因为Python把<code>0</code>、<code>空字符串&#39;&#39;</code>和<code>None</code>看成 False，其他数值和非空字符串都看成 True，所以：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">True</span> <span class="keyword">and</span> <span class="string">&#x27;a=T&#x27;</span> 计算结果是 <span class="string">&#x27;a=T&#x27;</span></span><br><span class="line">继续计算 <span class="string">&#x27;a=T&#x27;</span> <span class="keyword">or</span> <span class="string">&#x27;a=F&#x27;</span> 计算结果还是 <span class="string">&#x27;a=T&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>要解释上述结果，又涉及到 and 和 or 运算的一条重要法则：短路计算。</strong></p>
<ol>
<li><p>在计算<code>a and b</code>时，如果 a 是 False，则根据与运算法则，整个结果必定为 False，因此返回 a；如果 a 是 True，则整个计算结果必定取决与 b，因此返回 b。</p>
</li>
<li><p>在计算<code>a or b</code>时，如果 a 是 True，则根据或运算法则，整个计算结果必定为 True，因此返回 a；如果 a 是 False，则整个计算结果必定取决于 b，因此返回 b。</p>
</li>
</ol>
<p>所以Python解释器在做布尔运算时，只要能提前确定计算结果，它就不会往后算了，直接返回结果。</p>
<h3 id="list"><a href="#list" class="headerlink" title="list"></a>list</h3><h4 id="创建list"><a href="#创建list" class="headerlink" title="创建list"></a>创建list</h4><p>Python内置的一种数据类型是列表：<code>list</code>。list是一种有序的集合，可以随时添加和删除其中的元素。</p>
<p>比如，列出班里所有同学的名字，就可以用一个list表示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&#x27;Michael&#x27;</span>, <span class="string">&#x27;Bob&#x27;</span>, <span class="string">&#x27;Tracy&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;Michael&#x27;</span>, <span class="string">&#x27;Bob&#x27;</span>, <span class="string">&#x27;Tracy&#x27;</span>]</span><br></pre></td></tr></table></figure>

<p>list是数学意义上的有序集合，也就是说，list中的元素是按照顺序排列的。</p>
<p>构造list非常简单，按照上面的代码，直接用<code>[ ]</code>把list的所有元素都括起来，就是一个list对象。通常，我们会把list赋值给一个变量，这样，就可以通过变量来引用list：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">classmates = [<span class="string">&#x27;Michael&#x27;</span>, <span class="string">&#x27;Bob&#x27;</span>, <span class="string">&#x27;Tracy&#x27;</span>]</span><br><span class="line">classmates <span class="comment">## 打印classmates变量的内容</span></span><br><span class="line">[<span class="string">&#x27;Michael&#x27;</span>, <span class="string">&#x27;Bob&#x27;</span>, <span class="string">&#x27;Tracy&#x27;</span>]</span><br></pre></td></tr></table></figure>

<p>由于Python是动态语言，所以list中包含的元素并不要求都必须是同一种数据类型，我们完全可以在list中包含各种数据：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">L = [<span class="string">&#x27;Michael&#x27;</span>, <span class="number">100</span>, <span class="literal">True</span>]</span><br></pre></td></tr></table></figure>

<p>一个元素也没有的list，就是空list：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">empty_list = []</span><br></pre></td></tr></table></figure>

<h4 id="按照索引访问list"><a href="#按照索引访问list" class="headerlink" title="按照索引访问list"></a>按照索引访问list</h4><p>由于list是一个有序集合，所以，我们可以用一个list按分数从高到低表示出班里的3个同学：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">L = [<span class="string">&#x27;Adam&#x27;</span>, <span class="string">&#x27;Lisa&#x27;</span>, <span class="string">&#x27;Bart&#x27;</span>]</span><br></pre></td></tr></table></figure>

<p>那我们如何从list中获取指定第 N 名的同学呢？方法是通过索引来获取list中的指定元素。</p>
<p><strong>需要特别注意的是</strong>，索引从 0 开始，也就是说，第一个元素的索引是0，第二个元素的索引是1，以此类推。</p>
<p>因此，要打印第一名同学的名字，用 L[0]:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> L[<span class="number">0</span>]</span><br><span class="line">Adam</span><br></pre></td></tr></table></figure>

<p>要打印第二名同学的名字，用 L[1]:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> L[<span class="number">1</span>]</span><br><span class="line">Lisa</span><br></pre></td></tr></table></figure>

<p>要打印第三名同学的名字，用 L[2]:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> L[<span class="number">2</span>]</span><br><span class="line">Bart</span><br></pre></td></tr></table></figure>

<p>要打印第四名同学的名字，用 L[3]:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> L[<span class="number">3</span>]</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">IndexError: list index out of range</span><br></pre></td></tr></table></figure>

<p>报错了！IndexError意思就是索引超出了范围，因为上面的list只有3个元素，有效的索引是 0，1，2。</p>
<p>所以，使用索引时，<strong>千万注意不要越界</strong>。</p>
<h4 id="倒序访问list"><a href="#倒序访问list" class="headerlink" title="倒序访问list"></a>倒序访问list</h4><p>我们还是用一个list按分数从高到低表示出班里的3个同学：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">L = [<span class="string">&#x27;Adam&#x27;</span>, <span class="string">&#x27;Lisa&#x27;</span>, <span class="string">&#x27;Bart&#x27;</span>]</span><br></pre></td></tr></table></figure>

<p>这时，老师说，请分数最低的同学站出来。</p>
<p>要写代码完成这个任务，我们可以先数一数这个 list，发现它包含3个元素，因此，最后一个元素的索引是2：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> L[<span class="number">2</span>]</span><br><span class="line">Bart</span><br></pre></td></tr></table></figure>

<p>有没有更简单的方法？有！</p>
<p>Bart同学是最后一名，俗称倒数第一，所以，我们可以用 -1 这个索引来表示最后一个元素：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> L[<span class="number">-1</span>]</span><br><span class="line">Bart</span><br></pre></td></tr></table></figure>

<p>Bart同学表示躺枪。</p>
<p>类似的，倒数第二用 -2 表示，倒数第三用 -3 表示，倒数第四用 -4 表示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> L[<span class="number">-2</span>]</span><br><span class="line">Lisa</span><br><span class="line"><span class="keyword">print</span> L[<span class="number">-3</span>]</span><br><span class="line">Adam</span><br><span class="line"><span class="keyword">print</span> L[<span class="number">-4</span>]</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">IndexError: list index out of range</span><br></pre></td></tr></table></figure>

<p>L[-4] 报错了，因为倒数第四不存在，一共只有3个元素。</p>
<p>使用倒序索引时，也要注意<strong>不要越界</strong>。</p>
<h4 id="给list添加新元素"><a href="#给list添加新元素" class="headerlink" title="给list添加新元素"></a>给list添加新元素</h4><p>现在，班里有3名同学：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">L = [<span class="string">&#x27;Adam&#x27;</span>, <span class="string">&#x27;Lisa&#x27;</span>, <span class="string">&#x27;Bart&#x27;</span>]</span><br></pre></td></tr></table></figure>

<p>今天，班里转来一名新同学 Paul，如何把新同学添加到现有的 list 中呢？</p>
<p>第一个办法是用 list 的<code>append()</code>方法，把新同学追加到 list 的末尾：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">L = [<span class="string">&#x27;Adam&#x27;</span>, <span class="string">&#x27;Lisa&#x27;</span>, <span class="string">&#x27;Bart&#x27;</span>]</span><br><span class="line">L.append(<span class="string">&#x27;Paul&#x27;</span>)</span><br><span class="line"><span class="keyword">print</span> L</span><br><span class="line">[<span class="string">&#x27;Adam&#x27;</span>, <span class="string">&#x27;Lisa&#x27;</span>, <span class="string">&#x27;Bart&#x27;</span>, <span class="string">&#x27;Paul&#x27;</span>]</span><br></pre></td></tr></table></figure>

<p>**append()**总是把新的元素添加到 list 的尾部。</p>
<p>如果 Paul 同学表示自己总是考满分，要求添加到第一的位置，怎么办？</p>
<p>方法是用list的<code> insert()</code>方法，它接受两个参数，第一个参数是索引号，第二个参数是待添加的新元素：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">L = [<span class="string">&#x27;Adam&#x27;</span>, <span class="string">&#x27;Lisa&#x27;</span>, <span class="string">&#x27;Bart&#x27;</span>]</span><br><span class="line">L.insert(<span class="number">0</span>, <span class="string">&#x27;Paul&#x27;</span>)</span><br><span class="line"><span class="keyword">print</span> L</span><br><span class="line">[<span class="string">&#x27;Paul&#x27;</span>, <span class="string">&#x27;Adam&#x27;</span>, <span class="string">&#x27;Lisa&#x27;</span>, <span class="string">&#x27;Bart&#x27;</span>]</span><br></pre></td></tr></table></figure>

<p><strong>L.insert(0, ‘Paul’)</strong> 的意思是，’Paul’将被添加到索引为 0 的位置上（也就是第一个），而原来索引为 0 的Adam同学，以及后面的所有同学，都自动向后移动一位。</p>
<h4 id="从list删除元素"><a href="#从list删除元素" class="headerlink" title="从list删除元素"></a>从list删除元素</h4><p>Paul同学刚来几天又要转走了，那么我们怎么把Paul 从现有的list中删除呢？</p>
<p>如果Paul同学排在最后一个，我们可以用list的<code>pop()</code>方法删除：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">L = [<span class="string">&#x27;Adam&#x27;</span>, <span class="string">&#x27;Lisa&#x27;</span>, <span class="string">&#x27;Bart&#x27;</span>, <span class="string">&#x27;Paul&#x27;</span>]</span><br><span class="line">L.pop()</span><br><span class="line"><span class="string">&#x27;Paul&#x27;</span></span><br><span class="line"><span class="keyword">print</span> L</span><br><span class="line">[<span class="string">&#x27;Adam&#x27;</span>, <span class="string">&#x27;Lisa&#x27;</span>, <span class="string">&#x27;Bart&#x27;</span>]</span><br></pre></td></tr></table></figure>

<p>**pop()**方法总是删掉list的最后一个元素，并且它还返回这个元素，所以我们执行 L.pop() 后，会打印出 ‘Paul’。</p>
<p>如果Paul同学不是排在最后一个怎么办？比如Paul同学排在第三：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">L = [<span class="string">&#x27;Adam&#x27;</span>, <span class="string">&#x27;Lisa&#x27;</span>, <span class="string">&#x27;Paul&#x27;</span>, <span class="string">&#x27;Bart&#x27;</span>]</span><br></pre></td></tr></table></figure>

<p>要把Paul踢出list，我们就必须先定位Paul的位置。由于Paul的索引是2，因此，用<code> pop(2)</code>把Paul删掉：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">L.pop(<span class="number">2</span>)</span><br><span class="line"><span class="string">&#x27;Paul&#x27;</span></span><br><span class="line"><span class="keyword">print</span> L</span><br><span class="line">[<span class="string">&#x27;Adam&#x27;</span>, <span class="string">&#x27;Lisa&#x27;</span>, <span class="string">&#x27;Bart&#x27;</span>]</span><br></pre></td></tr></table></figure>

<h4 id="替换元素"><a href="#替换元素" class="headerlink" title="替换元素"></a>替换元素</h4><p>假设现在班里仍然是3名同学：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">L = [<span class="string">&#x27;Adam&#x27;</span>, <span class="string">&#x27;Lisa&#x27;</span>, <span class="string">&#x27;Bart&#x27;</span>]</span><br></pre></td></tr></table></figure>

<p>现在，Bart同学要转学走了，碰巧来了一个Paul同学，要更新班级成员名单，我们可以先把Bart删掉，再把Paul添加进来。</p>
<p>另一个办法是直接用Paul把Bart给替换掉：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">L[<span class="number">2</span>] = <span class="string">&#x27;Paul&#x27;</span></span><br><span class="line"><span class="keyword">print</span> L</span><br><span class="line">L = [<span class="string">&#x27;Adam&#x27;</span>, <span class="string">&#x27;Lisa&#x27;</span>, <span class="string">&#x27;Paul&#x27;</span>]</span><br></pre></td></tr></table></figure>

<p>对list中的某一个索引赋值，就可以直接用新的元素替换掉原来的元素，list包含的元素个数保持不变。</p>
<p>由于Bart还可以用 -1 做索引，因此，下面的代码也可以完成同样的替换工作：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">L[<span class="number">-1</span>] = <span class="string">&#x27;Paul&#x27;</span></span><br></pre></td></tr></table></figure>

<h4 id="创建tuple"><a href="#创建tuple" class="headerlink" title="创建tuple"></a>创建tuple</h4><p>tuple是另一种有序的列表，中文翻译为“ 元组 ”。tuple 和 list 非常类似，但是，tuple一旦创建完毕，就不能修改了。</p>
<p>同样是表示班里同学的名称，用tuple表示如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">t = (<span class="string">&#x27;Adam&#x27;</span>, <span class="string">&#x27;Lisa&#x27;</span>, <span class="string">&#x27;Bart&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>创建tuple和创建list唯一不同之处是用<code>( )</code>替代了<code>[ ]</code>。</p>
<p>现在，这个<code>t</code>就不能改变了，tuple没有 append()方法，也没有insert()和pop()方法。所以，新同学没法直接往 tuple 中添加，老同学想退出 tuple 也不行。</p>
<p>获取 tuple 元素的方式和 list 是一模一样的，我们可以正常使用 t[0]，t[-1]等索引方式访问元素，但是不能赋值成别的元素，不信可以试试：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">t[<span class="number">0</span>] = <span class="string">&#x27;Paul&#x27;</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: <span class="string">&#x27;tuple&#x27;</span> object does <span class="keyword">not</span> support item assignment</span><br></pre></td></tr></table></figure>

<h4 id="单元素tuple"><a href="#单元素tuple" class="headerlink" title="单元素tuple"></a>单元素tuple</h4><p>tuple和list一样，可以包含 0 个、1个和任意多个元素。</p>
<p>包含多个元素的 tuple，前面我们已经创建过了。</p>
<p>包含 0 个元素的 tuple，也就是空tuple，直接用 ()表示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">t = ()</span><br><span class="line"><span class="keyword">print</span> t</span><br><span class="line">()</span><br></pre></td></tr></table></figure>

<p>创建包含1个元素的 tuple 呢？来试试：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">t = (<span class="number">1</span>)</span><br><span class="line"><span class="keyword">print</span> t</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>好像哪里不对！t 不是 tuple ，而是整数1。<strong>为什么</strong>呢？</p>
<p>因为<code>()</code>既可以表示tuple，又可以作为括号表示运算时的优先级，结果 (1) 被Python解释器计算出结果 1，导致我们得到的不是tuple，而是整数 1。</p>
<p>正是因为用()定义单元素的tuple有歧义，所以 Python 规定，单元素 tuple 要多加一个逗号“,”，这样就避免了歧义：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">t = (<span class="number">1</span>,)</span><br><span class="line"><span class="keyword">print</span> t</span><br><span class="line">(<span class="number">1</span>,)</span><br></pre></td></tr></table></figure>

<p>Python在打印单元素tuple时，也自动添加了一个“,”，为了更明确地告诉你这是一个tuple。</p>
<p>多元素 tuple 加不加这个额外的“,”效果是一样的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">t = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>,)</span><br><span class="line"><span class="keyword">print</span> t</span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<h4 id="“可变”的tuple"><a href="#“可变”的tuple" class="headerlink" title="“可变”的tuple"></a>“可变”的tuple</h4><p>前面我们看到了tuple一旦创建就不能修改。现在，我们来看一个“可变”的tuple：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">t = (<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, [<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>])</span><br></pre></td></tr></table></figure>

<p><strong>注意</strong>到 t 有 3 个元素：**’a’，’b’<strong>和一个list：</strong>[‘A’, ‘B’]**。list作为一个整体是tuple的第3个元素。list对象可以通过 t[2] 拿到：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">L = t[<span class="number">2</span>]</span><br></pre></td></tr></table></figure>

<p>然后，我们把list的两个元素改一改：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">L[<span class="number">0</span>] = <span class="string">&#x27;X&#x27;</span></span><br><span class="line">L[<span class="number">1</span>] = <span class="string">&#x27;Y&#x27;</span></span><br></pre></td></tr></table></figure>

<p>再看看tuple的内容：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> t</span><br><span class="line">(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, [<span class="string">&#x27;X&#x27;</span>, <span class="string">&#x27;Y&#x27;</span>])</span><br></pre></td></tr></table></figure>

<p>表面上看，tuple的元素确实变了，但其实变的不是 tuple 的元素，而是list的元素。</p>
<p>tuple一开始指向的list并没有改成别的list，所以，tuple所谓的<strong>“不变”</strong>是说，tuple的每个元素，指向永远不变。即**指向’a’，就不能改成指向’b’**，指向一个list，就不能改成指向其他对象，但指向的这个list本身是可变的！</p>
<p>理解了<strong>“指向不变”</strong>后，要创建一个内容也不变的tuple怎么做？那就必须保证tuple的每一个元素本身也不能变。</p>
<h2 id="爬虫简介"><a href="#爬虫简介" class="headerlink" title="爬虫简介"></a>爬虫简介</h2><h3 id="爬虫是什么"><a href="#爬虫是什么" class="headerlink" title="爬虫是什么"></a>爬虫是什么</h3><blockquote>
<p>通过编写这个程序，使其模拟进行浏览器上网，进而在互联网上抓取数据的过程</p>
</blockquote>
<h3 id="爬虫的价值"><a href="#爬虫的价值" class="headerlink" title="爬虫的价值"></a>爬虫的价值</h3><blockquote>
<p>抓取互联网上的数据，为人所用，有了大量的数据，就如同有了一个数据银行一样</p>
<p>下一步做的就是如何将这些爬取的数据产品化、商业化</p>
</blockquote>
<hr>
<ul>
<li><h3 id="爬虫可能带来的风险"><a href="#爬虫可能带来的风险" class="headerlink" title="爬虫可能带来的风险"></a>爬虫可能带来的风险</h3><ul>
<li>爬虫干扰了被访问网站的正常运营</li>
<li>爬虫抓取了收到法律保护的特定类型的数据或信息</li>
</ul>
</li>
<li><h3 id="如何在使用-编写爬虫的过程中，避免进入”局子”的厄运"><a href="#如何在使用-编写爬虫的过程中，避免进入”局子”的厄运" class="headerlink" title="如何在使用/编写爬虫的过程中，避免进入”局子”的厄运"></a>如何在使用/编写爬虫的过程中，避免进入”局子”的厄运</h3><ul>
<li>时常的优化自己的程序，避免干扰被访问网站的正常运行</li>
<li>在使用，传播爬取到的数据时，审查抓取到的内容</li>
<li>如果发现了涉及到用户商业机密等敏感内容,需要及时停止爬取或传播</li>
</ul>
</li>
</ul>
<ul>
<li><h3 id="爬虫在使用场景中的分类"><a href="#爬虫在使用场景中的分类" class="headerlink" title="爬虫在使用场景中的分类"></a>爬虫在使用场景中的分类</h3><ul>
<li>通用爬虫：抓取系统重要组成部分。抓取的是一整张页面数据</li>
<li>聚焦爬虫：是建立在通用爬虫的基础之上。抓取的是页面中特定的局部内容</li>
<li>增量式爬虫：检测网站中数据更新的情况。只会抓取网站中最新更新出来的数据</li>
</ul>
</li>
</ul>
<ul>
<li><h3 id="爬虫的矛与盾"><a href="#爬虫的矛与盾" class="headerlink" title="爬虫的矛与盾"></a>爬虫的矛与盾</h3><ul>
<li><p>反爬机制：门户网站可以通过制定相应的策略或者技术手段，防止爬虫程序进行网站数据的爬取</p>
</li>
<li><p>反反爬策略：爬虫程序可以通过制定相关的策略或者技术手段，破解门户网站中具备的反爬机制，从而可以获取门户网站中相关的数据</p>
</li>
<li><p>robots.txt协议：”君子协议”，规定了网站中哪些数据可以被爬取，哪些数据不可以被爬取</p>
</li>
<li><p>如何查看robots.txt协议：网站域名 + ‘/robots.txt’</p>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>例如：淘宝的域名为<code>www.taobao.com</code>，则协议地址为<code>www.taobao.com/robots.txt</code></p>
</blockquote>
<h2 id="http-amp-https协议"><a href="#http-amp-https协议" class="headerlink" title="http&amp;https协议"></a>http&amp;https协议</h2><h3 id="http协议"><a href="#http协议" class="headerlink" title="http协议"></a>http协议</h3><h4 id="概念：服务器和客户端进行数据交互的一种形式。"><a href="#概念：服务器和客户端进行数据交互的一种形式。" class="headerlink" title="概念：服务器和客户端进行数据交互的一种形式。"></a>概念：服务器和客户端进行数据交互的一种形式。</h4><ul>
<li>常用请求头信息<ul>
<li><code>User-Agent</code>：请求载体的身份标识</li>
<li><code>Connection</code>：请求完毕后，是断开连接还是保持连接</li>
</ul>
</li>
<li>常用响应头信息<ul>
<li><code>Content-Type</code>：服务器响应回客户端的数据类型</li>
</ul>
</li>
</ul>
<h3 id="https协议"><a href="#https协议" class="headerlink" title="https协议"></a>https协议</h3><h4 id="概念：安全的超文本传输协议"><a href="#概念：安全的超文本传输协议" class="headerlink" title="概念：安全的超文本传输协议"></a>概念：安全的超文本传输协议</h4><ul>
<li>加密方式<ul>
<li>对称秘钥加密</li>
<li>非对称秘钥加密</li>
<li>证书秘钥加密</li>
</ul>
</li>
</ul>
<h2 id="requests-模块"><a href="#requests-模块" class="headerlink" title="requests 模块"></a>requests 模块</h2><h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h3><blockquote>
<p>python中原生的一款基于网络请求的模块，功能非常强大，简单便捷，效率极高。</p>
<p>作用：模拟浏览器发送请求。</p>
<p>爬取页面中指定的页面内容，属于<strong>聚焦爬虫</strong>。</p>
</blockquote>
<h3 id="开始使用"><a href="#开始使用" class="headerlink" title="开始使用"></a>开始使用</h3><ul>
<li>环境安装（需要先安装python编译环境）</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install requests</span><br></pre></td></tr></table></figure>

<ul>
<li>使用流程/编码流程<ul>
<li>指定URL</li>
<li>基于requests模块发起请求</li>
<li>获取响应对象中的数据值</li>
<li>持久化存储</li>
</ul>
</li>
</ul>
<h3 id="第一个爬虫程序"><a href="#第一个爬虫程序" class="headerlink" title="第一个爬虫程序"></a>第一个爬虫程序</h3><p>需求：爬取搜狗首页的页面数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 导包</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="comment">## step1：指定url</span></span><br><span class="line">url = <span class="string">&#x27;https://www.sogou.com/&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## step_2：发起请求：使用get方法发起get请求，该方法会返回一个响应对象。参数url表示请求对应的url</span></span><br><span class="line">response = requests.get(url=url)</span><br><span class="line"></span><br><span class="line"><span class="comment">## step_3：获取响应数据：通过调用响应对象的text属性，返回响应对象中存储的字符串形式的响应数据（页面源码数据）</span></span><br><span class="line">page_text = response.text</span><br><span class="line"></span><br><span class="line"><span class="comment">## step_4：持久化存储</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">&#x27;./sogou.html&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> fp:</span><br><span class="line">    fp.write(page_text)</span><br><span class="line">print(<span class="string">&quot;爬取数据完毕&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="实战案例"><a href="#实战案例" class="headerlink" title="实战案例"></a>实战案例</h3><h4 id="1-爬取搜狗指定词条对应的搜索结果页面（简易网页采集器）"><a href="#1-爬取搜狗指定词条对应的搜索结果页面（简易网页采集器）" class="headerlink" title="1. 爬取搜狗指定词条对应的搜索结果页面（简易网页采集器）"></a>1. 爬取搜狗指定词条对应的搜索结果页面（简易网页采集器）</h4><blockquote>
<p>[!warning|style:callout|label:案例引入|labelVisibility:visible|iconVisibility:visible]<br><code>UA:User-Agent</code>（请求载体的身份标识）</p>
<p>UA检测：门户网站的服务器会监测对应请求的载体身份标识。</p>
<p>如果检测到 请求的载体身份标识 为某一款浏览器，则说明该请求为正常请求；</p>
<p>如果检测到 请求的载体身份标识 不是浏览器，则表示为不正常请求（爬虫），</p>
<p>则服务端有可能拒绝该请求，导致爬取失败。</p>
</blockquote>
<h5 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="comment">## 1.指定url</span></span><br><span class="line">url = <span class="string">&#x27;https://www.sogou.com/web&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 2.UA伪装：将对应的User-Agent封装到字典中</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="comment">## 标识字符串可通过浏览器的开发者选项Network中获取</span></span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.122 Safari/537.36&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">## 3.处理url携带的参数：封装到字典中</span></span><br><span class="line">kw = input(<span class="string">&#x27;输入关键词/Enter a word：&#x27;</span>)</span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">&#x27;query&#x27;</span>: kw</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">## 4.对指定的url发起的请求，对应的url携带参数，并在请求过程中处理参数</span></span><br><span class="line">response = requests.get(url=url, params=data, headers=headers)</span><br><span class="line">page_text = response.text</span><br><span class="line"></span><br><span class="line"><span class="comment">## 6.持久化存储</span></span><br><span class="line">fileName = kw + <span class="string">&#x27;.html&#x27;</span></span><br><span class="line"><span class="keyword">with</span> open(fileName, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> fp:</span><br><span class="line">    fp.write(page_text)</span><br><span class="line">print(fileName, <span class="string">&#x27;保存成功&#x27;</span>)</span><br></pre></td></tr></table></figure>

<br/>

<h4 id="2-破解百度翻译"><a href="#2-破解百度翻译" class="headerlink" title="2. 破解百度翻译"></a>2. 破解百度翻译</h4><blockquote>
<p>[!tip|style:callout|label:思路|labelVisibility:visible|iconVisibility:visible]</p>
<p>若此操作<strong>引起页面局部刷新，网页地址不变</strong>，则可以判断此操作发出的是<strong>阿贾克斯（<code>XHR</code>）请求</strong>。</p>
<p>通过抓包工具，获取阿贾克斯（<code>XHR</code>）请求，找到带有被翻译字段参数的Post请求链接。</p>
<p>获取的响应数据（Content-Type）是一组<code>json</code>数据。</p>
</blockquote>
<h5 id="代码实现-1"><a href="#代码实现-1" class="headerlink" title="代码实现"></a>代码实现</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> json  <span class="comment">## 引入json库</span></span><br><span class="line"><span class="comment">## 1.指定url</span></span><br><span class="line">post_url = <span class="string">&#x27;https://fanyi.baidu.com/sug&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 2.UA伪装</span></span><br><span class="line">header = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.122 Safari/537.36&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">## 3.post请求参数处理（同get请求一致）</span></span><br><span class="line">word = input(<span class="string">&#x27;Enter a word:&#x27;</span>)</span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">&#x27;kw&#x27;</span>: word</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">## 4.请求发送</span></span><br><span class="line">response = requests.post(url=post_url, data=data, headers=header)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 5.获取响应数据：json()方法返回obj（需确认服务器响应类型为json）</span></span><br><span class="line">dic_obj = response.json()</span><br><span class="line"></span><br><span class="line"><span class="comment">## 6.持久化存储</span></span><br><span class="line">fileName = word+<span class="string">&#x27;.json&#x27;</span></span><br><span class="line">fp = open(fileName, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">json.dump(dic_obj, fp=fp, ensure_ascii=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">&#x27;操作完成!&#x27;</span>)</span><br></pre></td></tr></table></figure>

 <br/>

<h4 id="3-爬取豆瓣电影分类排行榜https-movie-douban-com中的电影详情数据"><a href="#3-爬取豆瓣电影分类排行榜https-movie-douban-com中的电影详情数据" class="headerlink" title="3. 爬取豆瓣电影分类排行榜https://movie.douban.com中的电影详情数据"></a>3. 爬取豆瓣电影分类排行榜<code>https://movie.douban.com</code>中的电影详情数据</h4><blockquote>
<p>[!tip|style:callout|label:思路|labelVisibility:visible|iconVisibility:visible]<br>在豆瓣电影官网点击”排行榜”，进入”喜剧”分类</p>
<p>所需要获取的，就是这个局部页面内的电影名称等基本信息</p>
<p>当页面到达最底部时，发现页面获取了新的请求反馈，加载出更多电影信息，且页面地址未变化，因此判断页面发出了阿贾克斯（<code>XHR</code>）请求</p>
<p>在抓包工具中的<code>Network - XHR</code>下捕获对应的请求信息，确认<code>Content-Type</code>属性为<code>application/json</code>后，<strong>获取其<code>url</code>，请求类型（GET），以及所有来自表单信息（<code>Form Data</code>）的键值对</strong></p>
<p>最后分析键值对内的几个关键参数，并自定义使用</p>
</blockquote>
<h5 id="代码实现-2"><a href="#代码实现-2" class="headerlink" title="代码实现"></a>代码实现</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="comment">## 1.指定url</span></span><br><span class="line">url = <span class="string">&#x27;https://movie.douban.com/j/chart/top_list&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 2.UA伪装</span></span><br><span class="line">header = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.122 Safari/537.36&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">## 3.请求参数处理</span></span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">&#x27;type&#x27;</span>: <span class="string">&#x27;24&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;interval_id&#x27;</span>: <span class="string">&#x27;100:90&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;action&#x27;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;start&#x27;</span>: <span class="string">&#x27;0&#x27;</span>,  <span class="comment">## 表示从第几部电影开始获取</span></span><br><span class="line">    <span class="string">&#x27;limit&#x27;</span>: <span class="string">&#x27;20&#x27;</span>  <span class="comment">## 一次获取的信息个数</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">## 4.请求发送</span></span><br><span class="line">response = requests.get(url=url, params=data, headers=header)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 5.获取列表数据：json()方法返回obj</span></span><br><span class="line">list_data = response.json()</span><br><span class="line"></span><br><span class="line"><span class="comment">## 6.持久化存储</span></span><br><span class="line">fp = open(<span class="string">&#x27;./movies.json&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">json.dump(list_data, fp=fp, ensure_ascii=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">&#x27;获取结束!&#x27;</span>)</span><br></pre></td></tr></table></figure>

<br/>

<h4 id="4-爬取肯德基餐厅查询http-www-kfc-com-cn-kfccda-index-aspx中指定地点的餐厅数"><a href="#4-爬取肯德基餐厅查询http-www-kfc-com-cn-kfccda-index-aspx中指定地点的餐厅数" class="headerlink" title="4. 爬取肯德基餐厅查询http://www.kfc.com.cn/kfccda/index.aspx中指定地点的餐厅数"></a>4. 爬取肯德基餐厅查询<code>http://www.kfc.com.cn/kfccda/index.aspx</code>中指定地点的餐厅数</h4><blockquote>
<p>根据<code>Content-Type: text/plain; charset=utf-8</code>这一属性，返回的结果为text，因此无需调用<code>json</code></p>
<p>同样指定<code>url</code>为请求包内的链接，获取<code>Form Data</code>内的参数作为请求的参数</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="comment">## 1.指定url</span></span><br><span class="line">url = <span class="string">&#x27;http://www.kfc.com.cn/kfccda/ashx/GetStoreList.ashx?op=keyword&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 2.UA伪装</span></span><br><span class="line">header = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.122 Safari/537.36&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">## 3.请求参数处理</span></span><br><span class="line">kw = input(<span class="string">&#x27;输入关键字：&#x27;</span>)</span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">&#x27;cname&#x27;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;pid&#x27;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;keyword&#x27;</span>: kw,</span><br><span class="line">    <span class="string">&#x27;pageIndex&#x27;</span>: <span class="string">&#x27;1&#x27;</span>,  <span class="comment">## 指定页码</span></span><br><span class="line">    <span class="string">&#x27;pageSize&#x27;</span>: <span class="string">&#x27;10&#x27;</span>  <span class="comment">## 每页显示的实例个数</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">## 4.发送post请求</span></span><br><span class="line">response = requests.post(url=url, data=data, headers=header)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 5.获取列表数据</span></span><br><span class="line">list_data = response.text</span><br><span class="line"></span><br><span class="line"><span class="comment">## 6.持久化存储</span></span><br><span class="line">fileName = kw + <span class="string">&#x27;.txt&#x27;</span></span><br><span class="line"><span class="keyword">with</span> open(fileName, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> fp:</span><br><span class="line">    fp.write(list_data)</span><br><span class="line"></span><br><span class="line">print(<span class="string">&#x27;获取结束!&#x27;</span>)</span><br></pre></td></tr></table></figure>

<br/>

<h4 id="5-【进阶】爬取国家药品监督管理总局中-基于中华人民共和国化妆品生产许可证相关数据http-125-35-6-84-81-xk"><a href="#5-【进阶】爬取国家药品监督管理总局中-基于中华人民共和国化妆品生产许可证相关数据http-125-35-6-84-81-xk" class="headerlink" title="5. 【进阶】爬取国家药品监督管理总局中 基于中华人民共和国化妆品生产许可证相关数据http://125.35.6.84:81/xk"></a>5. 【进阶】爬取国家药品监督管理总局中 基于中华人民共和国化妆品生产许可证相关数据<code>http://125.35.6.84:81/xk</code></h4><h4 id="案例分析"><a href="#案例分析" class="headerlink" title="案例分析"></a>案例分析</h4><blockquote>
<p>[!note|style:callout|label:思路|labelVisibility:visible|iconVisibility:visible]<br>此链接的可见内容里并不包含许可证的详细信息，无法确定这个链接是否包含详细信息</p>
<p>但是可以确定的是，每一个企业名称都对应一个超链接，此链接内包含对应企业的详细数据。</p>
<p>因此可以尝试，从请求链接中获取页面的标签数据，通过查找<code>&lt;a&gt;</code>标签中的<code>herf</code>属性获取详细数据的链接</p>
</blockquote>
<p>第一步：初步代码，确认对网址请求是否能获取对应页面</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="comment">## 指定url</span></span><br><span class="line">url = <span class="string">&#x27;http://125.35.6.84:81/xk&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## UA伪装</span></span><br><span class="line">header = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.122 Safari/537.36&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#发送get请求 + 取列表数据</span></span><br><span class="line">page_text = requests.get(url=url, headers=header).text</span><br><span class="line"></span><br><span class="line"><span class="comment">## 持久化存储</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">&#x27;./HuaZhuangPin.html&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> fp:</span><br><span class="line">    fp.write(page_text)</span><br><span class="line"></span><br><span class="line">print(<span class="string">&#x27;获取结束!&#x27;</span>)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>验证发现，这种请求方式并不能获取页面内的详细信息，因此不能通过对<code>url</code>请求达成预期结果。</p>
<p>则可以判断，对原<code>url</code>请求的内容可能没有企业信息。很有可能时动态加载的信息，需要通过Ajax（<code>XHR</code>）请求来获取信息</p>
</blockquote>
<p>第二步：刷新页面，确认是否产生<code>XHR</code>请求数据</p>
<blockquote>
<p>验证发现，<code>XHR</code>得到了一组<code>json</code>数据，包含了页面内列表内的数据</p>
<p>但我们想的到的是列表内<code>url</code>对应的详细数据，于是进一步分析数据内部，发现并没有与<code>url</code>关联的数据，但是存在一个<code>ID</code>属性</p>
<ul>
<li>通过对详情页<code>url</code>的观察发现<ul>
<li><code>url</code>的域名都是一样的，只有携带的参数(ID)不一样</li>
<li>ID值可以从首页对应的Ajax请求到的<code>json</code>串中获取</li>
<li>域名和ID值能够拼接出一个完整的企业对应的详情页的<code>url</code></li>
</ul>
</li>
</ul>
</blockquote>
<p>但是这里还有一个坑，还需要确定新得到的详情页数据是否是<strong>来自动态加载的请求</strong>，若是来自动态加载的请求，获取页面数据也就没有意义。</p>
<p>因此我们可以选择用第一步的方法尝试获取，但这样的方法效率极低，可以改成改用抓包工具来查看页面的内容。抓包查看<code>All</code>下的数据包，发现没有企业的数据。</p>
<p>所以得出结论，详情页的页面数据也是动态加载出来的！</p>
<p>第三步：刷新详情页面，确认是否产生<code>XHR</code>请求数据</p>
<blockquote>
<p>验证发现，页面的确产生了数据类型为<code>json</code>的<code>HRX</code>请求，且请求内携带的参数为<code>id</code></p>
</blockquote>
<hr>
<blockquote>
<p>至此就可以得到<strong>完整解决方案</strong>：</p>
<ul>
<li>通过对原链接发起Ajax请求，获取<code>json</code>列表内的<code>ID</code>属性</li>
<li>将请求内的<code>url</code>与获取到的<code>ID</code>拼接，将其作为新的<code>url</code></li>
<li>对新的<code>url</code>发起Ajax请求，获取最终的详细数据</li>
<li>优化思路后的<strong>解决方案</strong>：批量获取页面内的<code>ID</code>参数，分别与请求的<code>url</code>结合，获取对应的企业详细数据</li>
</ul>
</blockquote>
<h4 id="代码实现-3"><a href="#代码实现-3" class="headerlink" title="代码实现"></a>代码实现</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="comment">## UA伪装</span></span><br><span class="line">header = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.122 Safari/537.36&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">## 获取首页加载请求的数据</span></span><br><span class="line">url = <span class="string">&#x27;http://125.35.6.84:81/xk/itownet/portalAction.do?method=getXkzsList&#x27;</span></span><br><span class="line"><span class="comment">## 对应参数的封装</span></span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">&#x27;on&#x27;</span>: <span class="string">&#x27;true&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;page&#x27;</span>: <span class="string">&#x27;1&#x27;</span>,  <span class="comment">## 获取的页码</span></span><br><span class="line">    <span class="string">&#x27;pageSize&#x27;</span>: <span class="string">&#x27;15&#x27;</span>,  <span class="comment">## 每页显示的数量</span></span><br><span class="line">    <span class="string">&#x27;productName&#x27;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;conditionType&#x27;</span>: <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;applyname&#x27;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;applysn&#x27;</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">## 发送请求，并获取请求响应数据</span></span><br><span class="line">json_ids = requests.post(url=url, data=data, headers=header).json()</span><br><span class="line"></span><br><span class="line"><span class="comment">## 遍历获取的json字典中ID数据所在的列表，批量获取并存储id</span></span><br><span class="line">id_list = []  <span class="comment">## 用于存储企业id的数组</span></span><br><span class="line"><span class="keyword">for</span> dic <span class="keyword">in</span> json_ids[<span class="string">&#x27;list&#x27;</span>]:</span><br><span class="line">    id_list.append(dic[<span class="string">&#x27;ID&#x27;</span>])  <span class="comment">## 将ID值存入存储列表中</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 打印查看是否正确获取</span></span><br><span class="line"><span class="comment">## print(id_list)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## --------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 获取企业详情数据</span></span><br><span class="line">post_url = <span class="string">&#x27;http://125.35.6.84:81/xk/itownet/portalAction.do?method=getXkzsById&#x27;</span></span><br><span class="line"><span class="comment">## 遍历id列表，分别与post_url结合发起请求</span></span><br><span class="line">all_data_list = []  <span class="comment">## 存储所有企业的详细数据</span></span><br><span class="line"><span class="keyword">for</span> id <span class="keyword">in</span> id_list:</span><br><span class="line">    <span class="comment">## 对应参数的封装</span></span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">&#x27;id&#x27;</span>: id</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">## 发送请求，并获取请求响应数据</span></span><br><span class="line">    detail_json = requests.post(url=post_url, data=data, headers=header).json()</span><br><span class="line"></span><br><span class="line">    <span class="comment">## 打印查看是否正确获取</span></span><br><span class="line">    <span class="comment">## print(detail_json,&#x27;\n----------end----------&#x27;)</span></span><br><span class="line">    all_data_list.append(detail_json)  <span class="comment">## 将企业信息存入存储列表中</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 持久化存储</span></span><br><span class="line">fp = open(<span class="string">&#x27;./allData.json&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">json.dump(all_data_list, fp=fp, ensure_ascii=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">&#x27;Over!&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h4 id="代码优化"><a href="#代码优化" class="headerlink" title="代码优化"></a>代码优化</h4><p>上述代码只能获取到其中一页的详细信息，若想要一次性多页（或所有）信息，只需要在页码的绑定数据外添加一个循环，将循环数字转为字符串后动态赋值给绑定数据，最后把只需执行一次的定义类代码移动到前面即可</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="comment">## UA伪装</span></span><br><span class="line">header = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.122 Safari/537.36&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">id_list = []  <span class="comment">## 用于存储企业id的数组</span></span><br><span class="line">all_data_list = []  <span class="comment">## 存储所有企业的详细数据</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 获取首页加载请求的数据</span></span><br><span class="line">url = <span class="string">&#x27;http://125.35.6.84:81/xk/itownet/portalAction.do?method=getXkzsList&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 添加循环，假设只获取前5页</span></span><br><span class="line"><span class="keyword">for</span> page <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">6</span>):</span><br><span class="line">    page = str(page)  <span class="comment">## 将数字转为字符串</span></span><br><span class="line">    <span class="comment">## 对应参数的封装</span></span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">&#x27;on&#x27;</span>: <span class="string">&#x27;true&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;page&#x27;</span>: page,  <span class="comment">## 获取的页码</span></span><br><span class="line">        <span class="string">&#x27;pageSize&#x27;</span>: <span class="string">&#x27;15&#x27;</span>,  <span class="comment">## 每页显示的数量</span></span><br><span class="line">        <span class="string">&#x27;productName&#x27;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;conditionType&#x27;</span>: <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;applyname&#x27;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;applysn&#x27;</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">## 发送请求，并获取请求响应数据</span></span><br><span class="line">    json_ids = requests.post(url=url, data=data, headers=header).json()</span><br><span class="line">    <span class="comment">## 遍历获取的json字典中ID数据所在的列表，批量获取并存储id</span></span><br><span class="line">    <span class="keyword">for</span> dic <span class="keyword">in</span> json_ids[<span class="string">&#x27;list&#x27;</span>]:</span><br><span class="line">        id_list.append(dic[<span class="string">&#x27;ID&#x27;</span>])  <span class="comment">## 将ID值存入存储列表中</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## --------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 获取企业详情数据</span></span><br><span class="line">post_url = <span class="string">&#x27;http://125.35.6.84:81/xk/itownet/portalAction.do?method=getXkzsById&#x27;</span></span><br><span class="line"><span class="comment">## 遍历id列表，分别与post_url结合发起请求</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> id <span class="keyword">in</span> id_list:</span><br><span class="line">    <span class="comment">## 对应参数的封装</span></span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">&#x27;id&#x27;</span>: id</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">## 发送请求，并获取请求响应数据</span></span><br><span class="line">    detail_json = requests.post(url=post_url, data=data, headers=header).json()</span><br><span class="line">    <span class="comment">## 将企业信息存入存储列表中</span></span><br><span class="line">    all_data_list.append(detail_json)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 持久化存储</span></span><br><span class="line">fp = open(<span class="string">&#x27;./allData.json&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">json.dump(all_data_list, fp=fp, ensure_ascii=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">&#x27;Over!&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="数据解析"><a href="#数据解析" class="headerlink" title="数据解析"></a>数据解析</h2><ul>
<li>聚焦爬虫：爬取页面中指定的页面内容</li>
<li>编码流程<ul>
<li>指定URL</li>
<li>发起请求</li>
<li>获取相应数据</li>
<li>$\color{red}数据解析$</li>
<li>持久化存储</li>
</ul>
</li>
</ul>
<h3 id="数据解析的方法-分类"><a href="#数据解析的方法-分类" class="headerlink" title="数据解析的方法/分类"></a>数据解析的方法/分类</h3><ul>
<li>正则</li>
<li>bs4</li>
<li>xpath(语言通用性强)</li>
</ul>
<h3 id="数据解析的原理概述"><a href="#数据解析的原理概述" class="headerlink" title="数据解析的原理概述"></a>数据解析的原理概述</h3><p>解析的局部文本内容都会在<strong>标签之间</strong>或<strong>标签对应的属性中</strong>进行存储</p>
<p>因此可以这么做：</p>
<ol>
<li><p>进行指定标签的定位</p>
</li>
<li><p>标签或者标签对应的属性中存储的数据值进行提取（解析）</p>
</li>
</ol>
<h3 id="正则表达式方法"><a href="#正则表达式方法" class="headerlink" title="正则表达式方法"></a>正则表达式方法</h3><h4 id="常用的正则表达式"><a href="#常用的正则表达式" class="headerlink" title="常用的正则表达式"></a>常用的正则表达式</h4><table>
<thead>
<tr>
<th align="center">符号</th>
<th align="center">含义</th>
<th align="center">举例</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>单字符：</strong></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">.</td>
<td align="center">除了换行以外的所有字符</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">[]</td>
<td align="center">匹配集合中的任意一个字符</td>
<td align="center">[aoe];[a-w]</td>
</tr>
<tr>
<td align="center">\d</td>
<td align="center">数字</td>
<td align="center">[0-9]</td>
</tr>
<tr>
<td align="center">\D</td>
<td align="center">非数字</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">\w</td>
<td align="center">数字、字母、下划线、中文</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">\W</td>
<td align="center">非\w</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">\s</td>
<td align="center">所有的空白字符包，包括空格、制表符、换页符等<br/>等价于【\f\n\r\t\v】</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">\S</td>
<td align="center">非空白</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><strong>数量修饰：</strong></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">*</td>
<td align="center">任意多次 &gt;=0</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">+</td>
<td align="center">至少一次 &gt;=1</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">?</td>
<td align="center">可有可无 0次或1次</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">{m}</td>
<td align="center">固定m次</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">{m,n}</td>
<td align="center">m-n次</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><strong>边界：</strong></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">^</td>
<td align="center">以某符号开头</td>
<td align="center">^begin</td>
</tr>
<tr>
<td align="center">$</td>
<td align="center">以某符号结尾</td>
<td align="center">end$</td>
</tr>
<tr>
<td align="center"><strong>分组：</strong></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">(ab)</td>
<td align="center">a和b字符成组</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><strong>贪婪模式：</strong></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">.*</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><strong>非贪婪(惰性)模式：</strong></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">.*?</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">re.I</td>
<td align="center">忽略大小写</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">re.M</td>
<td align="center">多行匹配</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">re.S</td>
<td align="center">单行匹配</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">re.sub</td>
<td align="center">在指定内容替换指定字符</td>
<td align="center">re.sub(正则, 替换内容, 字符串)</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h4 id="正则练习"><a href="#正则练习" class="headerlink" title="正则练习"></a>正则练习</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="comment">## 提取python</span></span><br><span class="line">re.findall(<span class="string">&#x27;python&#x27;</span>, key)[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">## 提取hello world</span></span><br><span class="line">key = <span class="string">&quot;&lt;html&gt;&lt;h1&gt;hello world&lt;/h1&gt;&lt;/html&gt;&quot;</span></span><br><span class="line">re.findall(<span class="string">&#x27;&lt;h1&gt;(.*)&lt;/h1&gt;&#x27;</span>, key)[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">## 提取170</span></span><br><span class="line">string = <span class="string">&#x27;我喜欢身高为170的女孩&#x27;</span></span><br><span class="line">re.findall(<span class="string">&#x27;\d+&#x27;</span>, string)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 提取http://和https://</span></span><br><span class="line">key = <span class="string">&#x27;lalala&lt;hTml&gt;hello&lt;/HtMl&gt;hahaha&#x27;</span>  <span class="comment">## 输出&lt;hTml&gt;hello&lt;/HtMl&gt;</span></span><br><span class="line">re.findall(<span class="string">&#x27;&lt;[Hh][Tt][mM][lL]&gt;(.*)&lt;/[Hh][Tt][mM][lL]&gt;&#x27;</span>, key)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 提取hit.</span></span><br><span class="line">key = <span class="string">&#x27;bobo@hut.edu.com&#x27;</span></span><br><span class="line">re.findall(<span class="string">&#x27;h.*?\.&#x27;</span>, key)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 匹配sas和saas</span></span><br><span class="line">key = <span class="string">&#x27;saas and sas and saaas&#x27;</span></span><br><span class="line">re.findall(<span class="string">&#x27;sa&#123;1,2&#125;s&#x27;</span>, key)</span><br></pre></td></tr></table></figure>

<h4 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h4><p>项目需求：爬取糗事百科指定页面的糗图，并将其保存到指定文件夹中</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="comment">## 爬取图片数据</span></span><br><span class="line">url = <span class="string">&#x27;https://pic.qiushibaike.com/system/pictures/12172/121721055/medium/9OSVY4ZSU4NN6T7V.jpg&#x27;</span></span><br><span class="line"><span class="comment">## text(字符串数据)、content(二进制数据)、json()</span></span><br><span class="line">img_data = requests.get(url=url).content</span><br><span class="line"></span><br><span class="line"><span class="comment">## 持久化存储</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">&#x27;./qiutu.jpg&#x27;</span>, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> fp:</span><br><span class="line">    fp.write(img_data)</span><br></pre></td></tr></table></figure>


    </div>
     
    <div class="post-footer__meta"><p>updated at 2020-10-31</p></div> 
    <div class="post-meta__cats"><a href="/blogs/categories/Python/" class="post-cats__link button">Python</a><a href="/blogs/categories/%E7%88%AC%E8%99%AB/" class="post-cats__link button">爬虫</a><a href="/blogs/tags/%E7%BC%96%E7%A8%8B/" class="post-tags__link button"># 编程</a></div> 
</article>


    <div class="nav">
        <div class="nav__prev">
            
                <a href="/blogs/2020/08/29/95381a0f7812/" class="nav__link">
                    <div>
                        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M589.088 790.624L310.464 512l278.624-278.624 45.248 45.248L400.96 512l233.376 233.376z" fill="#808080"></path></svg>
                    </div>
                    <div>
                        <div class="nav__label">
                            Previous Post
                        </div>
                        <div class="nav__title">
                            游戏编程模式
                        </div>
                    </div>
                </a>
            
        </div>
        <div class="nav__next">
            
                <a href="/blogs/2020/07/29/7e49b7197b2d/" class="nav__link">
                    <div>
                        <div class="nav__label">
                            Next Post
                        </div>
                        <div class="nav__title">
                            经典排序算法
                        </div>
                    </div>
                    <div>
                        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M434.944 790.624l-45.248-45.248L623.04 512l-233.376-233.376 45.248-45.248L713.568 512z" fill="#808080"></path></svg>
                    </div>
                </a>
            
        </div>
    </div>





</main>

            <footer class="footer">
    


    
    
    
        <span id="busuanzi_container_site_uv" hidden>
            <span></span>
            <span id="busuanzi_value_site_uv"></span>
            <span>名访客</span>
            
                <span>,</span>
            
        </span>
    
    
        <span id="busuanzi_container_site_pv" hidden>
            <span></span>
            <span id="busuanzi_value_site_pv"></span>
            <span>次访问</span>
            
        </span>
    
 
 


    
    
    <p class="footer-copyright">
        Copyright © 2019&nbsp;-&nbsp;2021 <a href="/blogs/">AlertNote</a>
    </p>
    
    
    
    <p>&lt;创作不易，且行且珍惜&gt;</p>

    
    

    
    <script src='https://unpkg.com/mermaid@8.8.4/dist/mermaid.min.js'></script>
    <script>
        if (window.mermaid) {
            mermaid.initialize({
                theme: 'forest'
            });
        }
    </script>
    

    <p>Powered by <a href="https://hexo.io" target="_blank">Hexo</a> | Theme - <a
            href="https://github.com/ChrAlpha/hexo-theme-cards" target="_blank">Cards</a></p>
</footer>
        </div>
        
    <script defer src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.1.0/dist/lazyload.min.js"></script>
    <script>
        window.lazyLoadOptions = {
            elements_selector: ".lazy",
            threshold: 0
        };
    </script>
 

 

 

 

  



 


    
 


    
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>

    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.4.1/dist/jquery.fancybox.min.css">

    
<script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.4.1/dist/jquery.fancybox.min.js"></script>

    <script>
        let lazyloadT = Boolean('true'),
            auto_fancybox = Boolean('true')
        if (auto_fancybox) {
            $(".post__content").find('img').each(function () {
                var element = document.createElement("a");
                $(element).attr("data-fancybox", "gallery");
                $(element).attr("href", $(this).attr("src"));
                if (lazyloadT) {
                    $(element).attr("href", $(this).attr("data-srcset"));
                }
                $(this).wrap(element);
            });
        } else {
            $(".post__content").find("fancybox").find('img').each(function () {
                var element = document.createElement("a");
                $(element).attr("data-fancybox", "gallery");
                $(element).attr("href", $(this).attr("src"));
                if (lazyloadT) {
                    $(element).attr("href", $(this).attr("data-srcset"));
                }
                $(this).wrap(element);
            });
        }
    </script>
 

 

 

 




    </body>
</html>
