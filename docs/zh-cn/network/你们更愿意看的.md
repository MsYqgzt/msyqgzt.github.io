# 例题

> 共有四个站进行码分多址CDMA通信。四个站的码片序列为：
>
> - A:（-1-1-1+1+1-1+1+1）
> - B:（-1-1+1-1+1+1+1-1）
> - C:（-1+1-1+1+1+1-1-1）
> - D:（-1+1-1-1-1-1+1-1）
>
> 现收到这样的码片序列：（-1+1-3+1-1-3+1+1）。
>
> 问哪个站发送数据了？发送数据的站发送的是1还是0？

$S·A=(+1-1+3+1-1+3+1+1)/8=1$，A发送1

$S·B=(+1-1-3-1-1-3+1-1)/8=-1$，B发送0

$S·C=(+1+1+3+1-1-3-1-1)/8=0$，C无发送

$S·D=(+1+1+3-1+1+3+1-1)/8=1$，D发送1

------

> PPP协议使用同步传输技术传送比特串0110111111111100。试问经过**零比特填充**后变成怎样的比特串？
>
> 若接收端收到的PPP帧的数据部分是0001110111110111110110，问删除发送端加入的零比特后变成怎样的比特串？

1. 011011111011111000
2. 00011101111111111110

解析：

1. 比特填充法的具体做法是：在发送端，当一串比特流尚未加上标志字段时，先用硬件扫描整个帧。**只要发现5个连续1，则立即填入一个0。**因此经过这种零比特填充后的数据，就可以保证不会出现6个连续1。
2. 在接收一个帧时，**先找到F字段以确定帧的边界。**接着再用硬件对其中的比特流进行扫描。**每当发现5个连续1时，就将这5个连续1后的一个0删除**，以还原成原来的比特流。

------

> 假定在使用CSMA/CD协议的$10Mbit/s$以太网中某个站在发送数据时检测到碰撞，执行退避算法时选择了随机数$r=100$。
>
> 试问这个站需要等待多长时间后才能再次发送数据？如果是$100Mbit/s$的以太网呢？

以太网最小帧长度为64字节，也就是$64×8=512bit$。

1. 10M以太网，争用内期为$512/(10×1000000)=0.0000512秒=51.2μs$

   现在碰撞算法r=100，则退后100个争用期容，$等待时间=51.2μs×100=5120us=5.12ms$

2. 100M以太网，争用期为$512/(100×1000000)=0.00000512秒=5.12μs$

   现在碰撞算法r=100，则退后100个争用期，$等待时间=5.12μs×100=512μs$

------

> 设某路由器建立了如下路由表：
>
> |   目的网络    |    子网掩码     | 下一跳 |
> | :-----------: | :-------------: | :----: |
> |  128.96.39.0  | 255.255.255.128 | 接口m0 |
> | 128.96.39.128 | 255.255.255.128 | 接口m1 |
> |  128.96.40.0  | 255.255.255.128 | $R_2$  |
> |  192.4.153.0  | 255.255.255.128 | $R_3$  |
> |   *（默认）   | 255.255.255.192 | $R_4$  |
>
> 现共收到5个分组，其目的地址分别为
>
> 1. 128.96.39.10
> 2. 128.96.40.12
> 3. 128.96.40.151
> 4. 1924.153.17
> 5. 192.4.153.90
>
> 试分别计算其下一跳

考点：二进制的“与”操作

- 将IP地址和子网掩码换算为二进制，子网掩码连续全1的是$\color{red}网络地址$，后面的是$\color{blue}主机地址$。

$$
~~~~~128.96.39.10 \implies \color{red}10000000·01100000·00100111\color{blue}·00001010\\
255.255.255.128\implies \color{red}11111111·11111111·11111111\color{blue}·10000000
$$

- IP地址和子网掩码进行与运算，结果是网络地址

$$
~~~~~128.96.39.10 \implies \color{red}10000000·01100000·00100111\color{blue}·00001010\\
255.255.255.128\implies \color{red}11111111·11111111·11111111\color{blue}·10000000\\
与运算--------------------------\\
~~~~~~~~128.96.39.0 \implies \color{red}10000000·01100000·00100111\color{blue}·00000000
$$

- 将上面的网络地址中的网络地址部分不变，主机地址变为全1，结果就是广播地址。

<br/>

答案：

1. 分组的目的站IP地址为：128.96.39.10。
   1. 先与子网掩码255.255.255.128相与，得128.96.39.0，该分组经网关1转发。

2. 分组的目的IP地址为：128.96.40.12。
   1. 与子网掩码255.255.255.128相与，得128.96.40.0，不等于128.96.39.0。
   2. 与子网掩码255.255.255.128相与，得128.96.40.0，
   3. 经查路由表可知，该项分组经网关3转发。

3. 分组的目的IP地址为：128.96.40.151，
   1. 与子网掩码255.255.255.128相与，得128.96.40.128
   2. 与子网掩码255.255.255.192相与，得128.96.40.128，
   3. 经查路由表知，该分组转发选择默认路由，经默认网关5转发。

4. 分组的目的IP地址为：192.4.153.17。
   1. 与子网掩码255.255.255.128相与，得192.4.153.0。
   2. 与子网掩码255.255.255.192相与，得192.4.153.0，
   3. 经查路由表知，该分组经网关4转发。

5. 分组的目的IP地址为：192.4.153.90，
   1. 与子网掩码255.255.255.128相与，得192.4.153.0。
   2. 与子网掩码255.255.255.192相与，得192.4.153.64，
   3. 经查路由表知，该分组转发选择默认路由，经默认网关5转发。

------

> 以下地址中的哪一个和86.32/12匹配？请说明理由。
>
> 1. 86.33.224.123；
> 2. 86.79.65.216；
> 3. 86.58.119.74；
> 4. 86.68.206.154。

86.32/12的含义是**前12位是网络地址**，32的二进制表示是0010 0000

只有第一个选项的前12位与以上表示的是一致的，即前8位相同，都是86。

而33的二进版制是0010 0001，前4位相同。

观察地址的第二个权字节0×32=010 0000，前缀12位，说明第二个字节的前4位在前缀中。给出的4个地址的第二字节的前4位分别是：0010，0100，0011和0100

只有（1）是匹配的